<!DOCTYPE html>
<html>

<head>
  <title>HT-Tracker - Habits</title>
  <link rel="stylesheet" href="/static/style.css">
</head>

<body>
  <div class="window">
    <div class="title-bar">
      <div class="title-bar-text">Habit Tracker 98</div>
      <div class="title-bar-controls">
        <div class="title-btn">_</div>
        <div class="title-btn">[]</div>
        <div class="title-btn">X</div>
      </div>
    </div> 

    <div class="window-body">
      <div style="margin-bottom: 20px;">
                <a href="/{{ user_id }}/account">
                    << Account</a>
            </div>

      <h2>Create New Habit</h2>
      <form method="post" action="/habit/form">
        <input type="text" name="name" placeholder="Enter habit name..." required autocomplete="off">
        <input type="text" name="category" placeholder="Enter category..." autocomplete="off">
        <button type="submit">Add Habit</button>
      </form>

      <div style="margin: 20px 0; border-top: 2px solid #808080; border-bottom: 2px solid #ffffff; height: 0;"></div>

      <h2>Active Habits</h2>
      {% if habits %}
      {% for habit in habits %}
      <div class="habit-list-item">
        <div style="display: flex; flex-direction: column;">
          <span style="font-weight: bold;">{{ habit.name }}</span>
          <span style="font-size: 12px; color: #555;">Category: {{ habit.category or "None" }}</span>
        </div>
        <div style="text-align: right; display: flex; flex-direction: column; align-items: flex-end; gap: 4px;">
          <span style="font-size: 12px;">{{ habit.log_count or 0 }} Logs</span>
          <div style="display: flex; gap: 10px;">
            <a href="/habits/{{ habit.id }}/log">Open</a>
            <form action="/habits/{{ habit.id }}/delete" method="post" style="margin: 0; display: inline;">
              <button type="submit" class="delete-btn">Delete</button>
            </form>
          </div>
        </div>
      </div>
      {% endfor %}
      {% else %}
      <p>No habits found. Start by adding one above.</p>
      {% endif %}

      <div class="status-bar">
        <p style="margin: 0;">Total Habits: {{ total_habit }}</p>
      </div>
    </div>
  </div>
  <!-- Confirmation Modal -->
  <div id="confirmModal" class="modal-overlay">
    <div class="modal-window">
      <div class="modal-title">Are you sure?</div>
      <div class="modal-text">This will permanently delete this habit and all its logs.</div>
      <div class="modal-actions">
        <button id="cancelBtn" class="btn-secondary" style="min-width: 80px;">Cancel</button>
        <button id="confirmBtn" class="btn-danger" style="min-width: 80px;">Delete</button>
      </div>
    </div>
  </div>

  <script src="/static/script/confirm-modal.js"></script>
</body>

</html>